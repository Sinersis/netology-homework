# Домашнее задание по лекции «Системы мониторинга»

---

**_1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя 
платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой 
осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы 
выведите в мониторинг и почему?_**

Минимально будем смотреть на метрики работы процесссора, жесткого диска,ОЗУ, http реквестов на наличие 4хх\5хх ошибок, правда 
немного все осложняет отсутствие доступов, но если сама по себе задача не исключает возможности установки агентов вроде 
экспортера для прометеуса то все перечисленные метрики и даже больше возможны для отслеживания.

Ну судя по тому какую работу выполняет платформа, ошибки могут возникнуть как из-за нехватки ресурсов так и из-за 
работы сети или кода

---
**_2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, 
что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. 
Что вы можете ему предложить?_**

_Могу предложить ему уволится (шутка)_.

Но в целом можно привести показатели к человекочитаймому виду + сделать вычисляймые метрики например для того чтобы 
показат  на сколько стабильно работют хосты в разрезе месяц\год. Качество обслуживание это не очень корректная метрика,
а вот например если есть показатели которые отображают ее то их нужно просто вычислить.

---
**_3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою 
очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, 
чтобы разработчики получали ошибки приложения?_**

Self-Hosted Sentry. И интеграция в приложение. Аггрегаторы логов по паттерну и засунуть все в простенький интерфейс.

Кроме того это очень странная ситуация, так как логи собираються в любом случае, если их нужно агреггировать и 
показывать удобно, то это уже другая история, но тоже не сказать что прям сложная и уж тем более не отнимающая много 
времени. Так что думаю что бюджет тут не причем им просто лень.

---
**_4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается 
выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?_**

Отсутствие 1хх и 3хх реквестов именно они могут состовлять 30% не достающих до нужной метрики, иными словами формула 
выглядит вот так: `(summ_1xx_requests+summ_2xx_requests+summ_3xx_requests)/summ_all_requests` 

---
**_5. Опишите основные плюсы и минусы pull и push систем мониторинга._**

PUSH:
   - упрощение репликации данных в разные системы мониторинга или их резервные копии
   - более гибкая настройка отправки пакетов данных с метриками
   - UDP — это менее затратный способ передачи данных, из-за чего может возрасти производительность сбора метрик

PULL:
   - легче контролировать подлинность данных
   - можно настроить единый proxy server до всех агентов с TLS
   - упрощённая отладка получения данных с агентов

Минусами можно назвать противо положные значения т.е. что у одного хорошо то у друго-го плохо.

---
**_6. Какие из ниже перечисленных систем относятся к push модели, а какие к pull? А может есть гибридные?_**
   * Prometheus (Pull)
   * TICK (Push)
   * Zabbix (Push/Pull)
   * VictoriaMetrics (Push/Pull)
   * Nagios (Push)

---

**_7. Склонируйте себе репозиторий и запустите TICK-стэк, используя технологии docker и docker-compose._**

![hw-78-7-1.png](assets%2Fimages%2Fhw-78%2Fhw-78-7-1.png)

---

**_8. Перейдите в веб-интерфейс Chronograf (http://localhost:8888) и откройте вкладку Data explorer._**

![hw-78-8-1.png](assets%2Fimages%2Fhw-78%2Fhw-78-8-1.png)

---

**_9. Изучите список telegraf inputs. Добавьте в конфигурацию telegraf следующий плагин - docker_**

![hw-78-9-1.png](assets%2Fimages%2Fhw-78%2Fhw-78-9-1.png)